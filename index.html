<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ–±–µ–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</title>
</head>
<body>
    <h1>–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–±–µ–≥ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</h1>
    <form id="mileageForm">
        <label for="mileage">–ü—Ä–æ–±–µ–≥:</label>
        <input type="number" id="mileage" name="mileage" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–±–µ–≥ –≤ –∫–º" required>
        <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </form>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        // üëâ –í–°–¢–ê–í–¨ –°–í–û–ô firebaseConfig –°–Æ–î–ê
		const firebaseConfig = {
			apiKey: "AIzaSyCuTQ4a2znu4NezpilyL2QAyMQHt5SAozE",
			authDomain: "focus3-df69e.firebaseapp.com",
			projectId: "focus3-df69e",
			storageBucket: "focus3-df69e.firebasestorage.app",
			messagingSenderId: "820116608318",
			appId: "1:820116608318:web:927be143470b2aa885c86f"
		};

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        const form = document.getElementById('mileageForm');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();
            const mileage = document.getElementById('mileage').value;

            try {
                await addDoc(collection(db, "mileages"), {
                    mileage: Number(mileage),
                    date: new Date().toISOString()
                });

                alert("–ü—Ä–æ–±–µ–≥ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!");
                form.reset();
            } catch (e) {
                alert("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: " + e.message);
                console.error(e);
            }
        });
    </script>
</body>
</html>
